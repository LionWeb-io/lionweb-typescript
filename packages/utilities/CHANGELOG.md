# Changelog

## 0.8.0 — not yet released

* Propagate `reference` field of `LionWebJsonReferenceTarget` type now being `null`able.


## 0.7.2

* W.r.t. the `generate{PlantUml|Mermaid}ForLanguage` diagram generation functions:
  * (Expose a `DiagramRenderer` type to unify these two diagram generation functions type-wise.)
  * Add an optional second argument to both functions, that determines which entities to focus on.
  * Fix the `generationMermaidForLanguage` function to correctly deal with concepts that are partitions, and classifiers that are annotations.
  * Modify both functions to make the relation between annotations and annotated classifier clearer.
* The `genericAsTreeText` function now renders nodes without any feature values without curly braces — i.e., without empty `{&hellip;}` block.
* (Because of the modification of the `MultRef<T>` type (from `@lionweb/core`) unresolved references are now filtered out actively.)


## 0.7.1

(The 0.7.0 release was deprecated because its `validation` package was faulty.)

* Move `dependenciesThroughDirectInheritanceOf` and `verboseDependencies` functions from `class-core-generator` to `utilities` package, and expose it.
* Rename `tsTypesForLanguage` &rarr; `tsTypeDefsForLanguage`.
  (This is a breaking change, but that function's hardly used anyway, and it's trivial to detect and fix.)
* Package `src/` again (— i.e., don't ignore for NPM packaging.)


## 0.6.12

Dependencies: `@lionweb/core` version 0.6.12

* Fix typo in code generated by `tsTypesForLanguage`.


## 0.6.11

Dependencies: `@lionweb/core` version 0.6.11

* Upgrade to `littoral-templates` version 0.3.0.
* Move the reference util functions (`referenceValues`, `incomingReferences`, `referencesToOutOfScopeNodes`) and type (class `ReferenceValue`) from the `utilities` package to `core`.
    Aliases (as re-exports) are left in its place to avoid code breaking.
    The move is necessary because not all clients of `@lionweb/utilities` can install the Node.js-specific dependencies of the dependencies that package (such as `crypto`).
* Upgraded version of `nanoid` dependency to a recent one, which doesn't have a reported security vulnerability.
* Separate CHANGELOG from README.
* Textualization of languages now also mentions what classifier it annotates.


### 0.6.10

Dependencies: `@lionweb/core` version 0.6.10

(no changes)


## 0.6.9

Dependencies: `@lionweb/core` version 0.6.9

* Make `withoutAnnotations` _not_ modify the original serialization chunk.
* (Use the `littoral-templates` package for textualization — of M2s, so far. This is a technical change, not a functional one, except for maybe some extra whitespace.)
* Add reference utilities that all return `ReferenceValue` objects:
    * `referenceValues(<source node>, <extraction facade>)`: all references within the given scope.
    * `incomingReferences(<target node(s)>, <search scope>, <extraction facade>)`: all (unique) references coming into the given target node(s) from the search scope.
    * `referencesToOutOfScopeNodes(<scope>, <extraction facade>)` all reference targets that are not in the given scope.


## 0.6.8

Dependencies: `@lionweb/core` version 0.6.8

* Add a `withoutAnnotations` function that removes all annotations, and all their descendants, from a serialization chunk.
* The `inferLanguagesFromSerializationChunk` function now detects whether a property is optional from `null` values in the serialization.


## 0.6.7

Dependencies: `@lionweb/core` version 0.6.7


## 0.6.6

Dependencies: `@lionweb/core` version 0.6.6


## 0.6.5

* TS types generator now generates 1 file per language.
  The generator also has several fixes, and assumes that the generated code will be embedded in an ES6 module.


## 0.6.4

* Rename `inferLanguagesFromChunk` &rarr; `inferLanguagesFromSerializationChunk` (for consistency).
* Extend the functionality of the `measure` metrics function.


## 0.6.3

* Add a `inferLanguagesFromChunk` function that infers a language from a serialization chunk.
* Renaming for consistency and clarity:
    * `readChunk` &rarr; `readSerializationChunk`
    * `tryLoad[All]AsLanguages` &rarr; `tryRead[All]AsLanguages`
* `tryReadAllAsLanguages` combines all serialization chunks (that are the result of serializing `Language`s) into one before attempting to deserialize, in order to have cross-language references resolve.


## 0.6.2

* Add a function `measure` that computes metrics on a serialization chunk.


## 0.6.1

* Improve PlantUML and Mermaid diagram generation:
    * Primitive types now rendered as classes marked as "<<primitive type>>".
    * Concepts or Annotations that extend the "Node" concept built into LionCore don't show that.
    * Optional (single-valued) features are now shown with a question mark (`?`) directly after the type, instead of being marked as "<<optional>>".
    * Fix/add support for annotations.
* **Remove** all Ecore functionality (=[issue #121](https://github.com/LionWeb-io/lionweb-typescript/issues/121))


## 0.6.0

* Add support for annotations in diagram generation (PlantUML and Mermaid), and textualization.
* **Remove** the `shortenedSerializationChunk` function, as it isn't used, nor very useful compared to the sorting and textualization.
* _Breaking name changes_: rename `asText` &rarr; `languageAsText`, `shortenedSerialization` &rarr; `shortenedSerializationChunk`, `sortedSerialization` &rarr; `sortedSerializationChunk`.
* Expose an `isSerializedLanguages` function.
* Expose an `orderedSerializationChunk` function that aligns the JSON key-value pairs in a serialization chunk according to the specification of the serialization format.
  That means that key-value pairs appear in precisely the same order as they do in the specification, and that missing key-value pairs are put in and get their default values.
* Expose a generic textual syntax for serialization chunks, through the `genericTreeAsText` function.
  This function is optionally language-aware: by providing an array of `Language`s as its second argument, it will try and look up `LanguageEntity` and `Feature` names instead of rendering their keys.


## 0.5.0

This is the first version corresponding to a release of LionWeb (version: 2023.1) as a whole.

* Update for the presence of annotations on a(ny) `Node`.
* Move the `readChunk` function from `@lionweb/cli` to `@lionweb/utilities`.
* Also generate TypeScript type definitions for `Annotation`s.
* Sort _everything_ in `sortedSerialization`.
* Extend textual syntax for "multi-linguality".
* Implement textual syntax for `Annotation`s.
* _Breaking change:_ Change ID generation to hashing (`hasher` function).
* (Make small, cosmetic fix in `asText` function.)
* Add a function `tsTypesForLanguage` that generates TypeScript types.
* Receive `asText` and ID checking from `@lionweb/core`.


## Prior to 0.5.0

No changelog has been kept for previous versions, regardless of whether these were published or not.

